@model GiftOfTheGiversFoundation.Models.VolunteerTask
@{
    ViewData["Title"] = "Task Details";
}

<h2>Task Details</h2>

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @TempData["ErrorMessage"]
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
}

<div class="card">
    <div class="card-body">
        <h3 class="card-title">@Model.Title</h3>
        <span class="badge bg-@(Model.Urgency == "Critical" ? "danger" : Model.Urgency == "High" ? "warning" : Model.Urgency == "Medium" ? "info" : "success") float-end">
            @Model.Urgency Priority
        </span>

        <div class="row mt-3">
            <div class="col-md-6">
                <h5>Task Information</h5>
                <dl>
                    <dt>Task Type:</dt>
                    <dd>@Model.TaskType</dd>

                    <dt>Location:</dt>
                    <dd>@Model.Location</dd>

                    <dt>Estimated Hours:</dt>
                    <dd>@Model.EstimatedHours hours</dd>

                    <dt>Status:</dt>
                    <dd>
                        <span class="badge bg-@(Model.Status == "Available" ? "success" : "warning")">
                            @Model.Status
                        </span>
                    </dd>
                </dl>
            </div>

            <div class="col-md-6">
                <h5>Requirements</h5>
                @if (!string.IsNullOrEmpty(Model.RequiredSkills))
                {
                    <p><strong>Skills Needed:</strong> @Model.RequiredSkills</p>
                }
                <p><strong>Date Created:</strong> @Model.DateCreated.ToString("MMM dd, yyyy")</p>
            </div>
        </div>

        <div class="mt-3">
            <h5>Description</h5>
            <p class="card-text">@Model.Description</p>
        </div>

        @if (Model.Status == "Available")
        {
            <div class="mt-4">
                <form asp-action="SignUpForTask" method="post">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="taskId" value="@Model.TaskID" />
                    <button type="submit" class="btn btn-success btn-lg">Sign Up for This Task</button>
                </form>
            </div>
        }
    </div>
</div>

<div class="mt-3">
    <a asp-action="BrowseTasks" class="btn btn-secondary">Back to Available Tasks</a>
    <a asp-controller="Volunteer" asp-action="Dashboard" class="btn btn-primary">Back to Dashboard</a>
</div>